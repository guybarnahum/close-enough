<html>
<head>
  <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
  <script src="dist/close-enough.js"> </script> 
  <script src="before-after.js"></script>
  <link rel="stylesheet" href="before-after.css">
</head>
<body>

<div id="compare-before-after" class="bal-container">

  <div class="wrapper bal-before">
    <div class="bal-before-inset">
      <img src="./big-head.jpg"/>
      <div class="bal-beforePosition beforeLabel">
        Before
      </div>
    </div>
  </div>

  <div class="wrapper bal-after">
    <img src="" style="display:none;"/>
    <canvas id="canvas"></canvas>
    <div class="bal-afterPosition afterLabel">
      After
    </div>
  </div>

  <div class="bal-handle">
    <span class="handle-left-arrow"></span>
    <span class="handle-right-arrow"></span>
  </div>
</div>

<script>

// ....................................................................... Args

let size  = 16;
let scale =  1;

const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);

size  = urlParams.get('size' ) || size;
scale = urlParams.get('scale') || scale;

// ............................................................... Close Enough

$('<img>').one('load', function(event) {

var style = new window.CloseEnough.style.Blobs({
      depth: 3,
      palette: new window.CloseEnough.palette.Lab()
    });

new CloseEnough.Head(this, {
    canvas: $('canvas')[0],
    size: size,
    maquette: {
      angle: 45,
      scale: ( scale / size )
    },
    style: style
  }).render();
})[0].src = './big-head.jpg';

// ............................................................. Before & After

new BeforeAfter({
  id: '#compare-before-after'
});

</script>

</body>
</html>
